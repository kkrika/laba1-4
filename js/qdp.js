/**
* NOTICE OF LICENSE
*
* This product is licensed for one customer to use on one installation (test stores and multishop included).
* Site developer has the right to modify this module to suit their needs, but can not redistribute the module in
* whole or in part. Any other use of this module constitues a violation of the user agreement.
*
* DISCLAIMER
*
* NO WARRANTIES OF DATA SAFETY OR MODULE SECURITY
* ARE EXPRESSED OR IMPLIED. USE THIS MODULE IN ACCORDANCE
* WITH YOUR MERCHANT AGREEMENT, KNOWING THAT VIOLATIONS OF
* PCI COMPLIANCY OR A DATA BREACH CAN COST THOUSANDS OF DOLLARS
* IN FINES AND DAMAGE A STORES REPUTATION. USE AT YOUR OWN RISK.
*
*  @author    idnovate.com <info@idnovate.com>
*  @copyright 2022 idnovate.com
*  @license   See above
*/
if("function"==typeof updateCartSummary&&(updateCartSummary=function(){var t=updateCartSummary;return function(a){if(t.apply(this,arguments),a&&!$.isEmptyObject(a.discounts))for(i=0;i<a.discounts.length;i++)if(0===$("#cart_discount_"+a.discounts[i].id_cart_rule).length){if(0!==priceDisplayMethod)var e=formatCurrency(-1*a.discounts[i].value_tax_exc,currencyFormat,currencySign,currencyBlank);else e=formatCurrency(-1*a.discounts[i].value_real,currencyFormat,currencySign,currencyBlank);if($(".cart-summary").length){var n="                                 <li class='cart_discount cart-summary-line clearfix' id='cart_discount_"+a.discounts[i].id_cart_rule+"'>                                     <span class='cart_discount_name'>"+a.discounts[i].name+"</span>                                    <span class='cart_discount_price value float-right'>"+e+"</span>                                </li>";$(".promo-name").append(n)}else if($("#cart_summary").length){n="                                 <tbody>                                     <tr class='cart_discount last_item' id='cart_discount_"+a.discounts[i].id_cart_rule+"'>                                         <td class='cart_discount_name' colspan='3'>"+a.discounts[i].name+"</td>                                         <td class='cart_discount_price'><span class='price-discount'>"+e+"</span></td>                                         <td class='cart_discount_delete'>1</td>                                         <td class='cart_discount_price'><span class='price-discount price'>"+e+"</span></td>                                         <td class='price_discount_del'></td>                                     </tr>                                 </tbody>";$("#cart_summary").append(n)}else if($("#opc-cart_summary").length){n="                                 <tbody>                                     <tr class='cart_discount' id='cart_discount_"+a.discounts[i].id_cart_rule+"'>                                         <td class='cart_discount_name cart_description' colspan='3'>"+a.discounts[i].name+"</td>                                         <td class='cart_unit'>                                             \x3c!-- <div class='mobile_table_title visible-phone'>Unit price b</div>                                             <div class='mobile_table_content'>                                                 <span class='price-discount price'>                                                     "+e+"                                                 </span>                                             </div> --\x3e                                         </td>                                         <td></td>                                         <td class='cart_discount_delete'>                                             \x3c!-- <div class='mobile_table_title visible-phone'>Qty</div>                                             <div class='mobile_table_content'>1</div> --\x3e                                         </td>                                         <td class='cart_total'>                                             <div class='mobile_table_title visible-phone'>Total</div>                                             <div class='mobile_table_content'>                                                 <span class='price-discount price'>                                                     "+e+"                                                 </span>                                             </div>                                         </td>                                         <td class='price_discount_del'>                                             <div class='mobile_table_title visible-phone'></div>                                             <div class='mobile_table_content'>                                                 "+(a.discounts[i].code?"<a onclick='deldisc("+a.discounts[i].id_cart_rule+")' class='price_discount_delete'><i class='fa-trash  fa'></i></a>":"")+"                                             </div>                                         </td>                                     </tr>                                 </tbody>";$("#opc-cart_summary").append(n)}}a&&$.isEmptyObject(a.gift_products)&&$("#cart_summary [id ^=product_][id $=gift]").remove()}}()),"object"==typeof prestashop&&($("body.page-cart .btn-touchspin").on("click",(function(){$(".btn-touchspin").attr("disabled","disabled")})),prestashop.on("updatedProduct",(function(){$(".btn-touchspin").removeAttr("disabled")}))),"function"==typeof upQuantity)function upQuantity(t,a){$(".cart_quantity_up").off("click").on("click",(function(t){t.preventDefault()})),void 0!==a&&a||(a=1);var e,i,n=0,r=0,c=0;i=t.split("_"),e=parseInt(i[0]),void 0!==i[1]&&(r=parseInt(i[1])),void 0!==i[2]&&"nocustom"!==i[2]&&(n=parseInt(i[2])),void 0!==i[3]&&(c=parseInt(i[3])),$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:baseUri+"?rand="+(new Date).getTime(),async:!0,cache:!1,dataType:"json",data:"controller=cart&ajax=true&add=true&getproductprice=true&summary=true&id_product="+e+"&ipa="+r+"&id_address_delivery="+c+(0!==n?"&id_customization="+n:"")+"&qty="+a+"&token="+static_token+"&allow_refresh=1",success:function(a){if(a.hasError){var e="";for(var i in a.errors)"indexOf"!==i&&(e+=$("<div />").html(a.errors[i]).text()+"\n");$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+e+"</p>"}],{padding:0}):alert(e),$("input[name=quantity_"+t+"]").val($("input[name=quantity_"+t+"_hidden]").val())}else a.refresh&&(window.location.href=window.location.href),updateCartSummary(a.summary),null!=window.ajaxCart&&ajaxCart.updateCart(a),0!==n&&updateCustomizedDatas(a.customizedDatas),updateHookShoppingCart(a.HOOK_SHOPPING_CART),updateHookShoppingCartExtra(a.HOOK_SHOPPING_CART_EXTRA),"undefined"!=typeof getCarrierListAndUpdate&&getCarrierListAndUpdate(),"undefined"!=typeof updatePaymentMethodsDisplay&&updatePaymentMethodsDisplay()},error:function(t,a,e){"abort"!==a&&(error="TECHNICAL ERROR: unable to save update quantity \n\nDetails:\nError thrown: "+t+"\nText status: "+a,$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+error+"</p>"}],{padding:0}):alert(error))}}).done((function(){$(".cart_quantity_up").off("click").on("click",(function(t){t.preventDefault(),upQuantity($(this).attr("id").replace("cart_quantity_up_","")),$("#"+$(this).attr("id").replace("_up_","_down_")).removeClass("disabled")}))})).fail((function(){$(".cart_quantity_up").off("click").on("click",(function(t){t.preventDefault(),upQuantity($(this).attr("id").replace("cart_quantity_up_","")),$("#"+$(this).attr("id").replace("_up_","_down_")).removeClass("disabled")}))}))}if("function"==typeof downQuantity)function downQuantity(t,a){$(".cart_quantity_down").off("click").on("click",(function(t){t.preventDefault()}));var e=$("input[name=quantity_"+t+"]").val(),i=e;void 0!==a&&a?a<0&&(a=-a):(a=1,i=e-1);var n,r,c=0,o=0,s=0;r=t.split("_"),n=parseInt(r[0]),void 0!==r[1]&&(o=parseInt(r[1])),void 0!==r[2]&&"nocustom"!==r[2]&&(c=parseInt(r[2])),void 0!==r[3]&&(s=parseInt(r[3])),i>0||$("#product_"+t+"_gift").length?$.ajax({type:"POST",headers:{"cache-control":"no-cache"},url:baseUri+"?rand="+(new Date).getTime(),async:!0,cache:!1,dataType:"json",data:"controller=cart&ajax=true&add=true&getproductprice=true&summary=true&id_product="+n+"&ipa="+o+"&id_address_delivery="+s+"&op=down"+(0!==c?"&id_customization="+c:"")+"&qty="+a+"&token="+static_token+"&allow_refresh=1",success:function(a){if(a.hasError){var e="";for(var n in a.errors)"indexOf"!==n&&(e+=$("<div />").html(a.errors[n]).text()+"\n");$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+e+"</p>"}],{padding:0}):alert(e),$("input[name=quantity_"+t+"]").val($("input[name=quantity_"+t+"_hidden]").val())}else a.refresh&&(window.location.href=window.location.href),updateCartSummary(a.summary),void 0!==window.ajaxCart&&ajaxCart.updateCart(a),0!==c&&updateCustomizedDatas(a.customizedDatas),updateHookShoppingCart(a.HOOK_SHOPPING_CART),updateHookShoppingCartExtra(a.HOOK_SHOPPING_CART_EXTRA),0==i&&$("#product_"+t).hide(),"undefined"!=typeof getCarrierListAndUpdate&&getCarrierListAndUpdate(),"undefined"!=typeof updatePaymentMethodsDisplay&&updatePaymentMethodsDisplay()},error:function(t,a,e){"abort"!==a&&alert("TECHNICAL ERROR: unable to save update quantity \n\nDetails:\nError thrown: "+t+"\nText status: "+a)}}).done((function(){$(".cart_quantity_down").off("click").on("click",(function(t){t.preventDefault(),downQuantity($(this).attr("id").replace("cart_quantity_down_",""))}))})).fail((function(){$(".cart_quantity_down").off("click").on("click",(function(t){t.preventDefault(),downQuantity($(this).attr("id").replace("cart_quantity_down_",""))}))})):(deleteProductFromSummary(t),$(".cart_quantity_down").off("click").on("click",(function(t){t.preventDefault(),downQuantity($(this).attr("id").replace("cart_quantity_down_",""))})))}