/*
* 2007-2016 PrestaShop
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* that is bundled with this package in the file LICENSE.txt.
* It is also available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade PrestaShop to newer
* versions in the future. If you wish to customize PrestaShop for your
* needs please refer to http://www.prestashop.com for more information.
*
* @author PrestaShop SA <contact@prestashop.com>
* @copyright 2007-2016 PrestaShop SA
* @license http://opensource.org/licenses/afl-3.0.php Academic Free License (AFL 3.0)
* International Registered Trademark & Property of PrestaShop SA
*/
var wishlistProductsIds=[];function WishlistCart(t,e,i,s,a,n){$.ajax({type:"GET",url:baseDir+"modules/blockwishlist/cart.php?rand="+(new Date).getTime(),headers:{"cache-control":"no-cache"},async:!0,cache:!1,data:"action="+e+"&id_product="+i+"&quantity="+a+"&token="+static_token+"&id_product_attribute="+s+"&id_wishlist="+n,success:function(s){"add"==e&&(1==isLogged?(wishlistProductsIdsAdd(i),wishlistRefreshStatus(),$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+added_to_wishlist+"</p>"}],{padding:0}):alert(added_to_wishlist)):$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+loggin_required+"</p>"}],{padding:0}):alert(loggin_required)),"delete"==e&&(wishlistProductsIdsRemove(i),wishlistRefreshStatus()),0!=$("#"+t).length&&($("#"+t).slideUp("normal"),document.getElementById(t).innerHTML=s,$("#"+t).slideDown("normal"))}})}function WishlistChangeDefault(t,e){$.ajax({type:"GET",url:baseDir+"modules/blockwishlist/cart.php?rand="+(new Date).getTime(),headers:{"cache-control":"no-cache"},async:!0,data:"id_wishlist="+e+"&token="+static_token,cache:!1,success:function(e){$("#"+t).slideUp("normal"),document.getElementById(t).innerHTML=e,$("#"+t).slideDown("normal")}})}function WishlistBuyProduct(t,e,i,s,a,n){return n?ajaxCart.add(e,i,!1,a,1,[t,s]):($("#"+s).val(0),WishlistAddProductCart(t,e,i,s),document.forms["addtocart_"+e+"_"+i].method="POST",document.forms["addtocart_"+e+"_"+i].action=baseUri+"?controller=cart",document.forms["addtocart_"+e+"_"+i].elements.token.value=static_token,document.forms["addtocart_"+e+"_"+i].submit()),!0}function WishlistAddProductCart(t,e,i,s){return!($("#"+s).val()<=0)&&($.ajax({type:"GET",url:baseDir+"modules/blockwishlist/buywishlistproduct.php?rand="+(new Date).getTime(),headers:{"cache-control":"no-cache"},data:"token="+t+"&static_token="+static_token+"&id_product="+e+"&id_product_attribute="+i,async:!0,cache:!1,success:function(t){t?$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+t+"</p>"}],{padding:0}):alert(t):$("#"+s).val($("#"+s).val()-1)}}),!0)}function WishlistManage(t,e){$.ajax({type:"GET",async:!0,url:baseDir+"modules/blockwishlist/managewishlist.php?rand="+(new Date).getTime(),headers:{"cache-control":"no-cache"},data:"id_wishlist="+e+"&refresh="+!1,cache:!1,success:function(e){$("#"+t).hide(),document.getElementById(t).innerHTML=e,$("#"+t).fadeIn("slow"),$(".wishlist_change_button").each((function(t){$(this).popover({html:!0,content:function(){return $(this).next(".popover-content").html()}})}))}})}function WishlistProductManage(t,e,i,s,a,n,c){$.ajax({type:"GET",async:!0,url:baseDir+"modules/blockwishlist/managewishlist.php?rand="+(new Date).getTime(),headers:{"cache-control":"no-cache"},data:"action="+e+"&id_wishlist="+i+"&id_product="+s+"&id_product_attribute="+a+"&quantity="+n+"&priority="+c+"&refresh="+!0,cache:!1,success:function(t){"delete"==e?$("#wlp_"+s+"_"+a).fadeOut("fast"):"update"==e&&($("#wlp_"+s+"_"+a).fadeOut("fast"),$("#wlp_"+s+"_"+a).fadeIn("fast")),nb_products=0,$("[id^='quantity']").each((function(t,e){nb_products+=parseInt(e.value)})),$("#wishlist_"+i).children("td").eq(1).html(nb_products)}})}function WishlistDelete(t,e,i){return 0!=confirm(i)&&("undefined"!=typeof mywishlist_url&&void $.ajax({type:"GET",async:!0,dataType:"json",url:mywishlist_url,headers:{"cache-control":"no-cache"},cache:!1,data:{rand:(new Date).getTime(),deleted:1,myajax:1,id_wishlist:e,action:"deletelist"},success:function(e){var i=$("#"+t).siblings().length;if($("#"+t).fadeOut("slow").remove(),$("#block-order-detail").html(""),0==i&&$("#block-history").remove(),e.id_default){var s=$("#wishlist_"+e.id_default+" > .wishlist_default");$("#wishlist_"+e.id_default+" > .wishlist_default > a").remove(),s.append('<p class="is_wish_list_default"><i class="icon icon-check-square"></i></p>')}}}))}function WishlistDefault(t,e){if("undefined"==typeof mywishlist_url)return!1;$.ajax({type:"GET",async:!0,url:mywishlist_url,headers:{"cache-control":"no-cache"},cache:!1,data:{rand:(new Date).getTime(),default:1,id_wishlist:e,myajax:1,action:"setdefault"},success:function(e){var i=$(".is_wish_list_default").parents("tr").attr("id"),s=$(".is_wish_list_default").parent();$(".is_wish_list_default").remove(),s.append('<a href="#" onclick="javascript:event.preventDefault();(WishlistDefault(\''+i+"', '"+i.replace("wishlist_","")+'\'));"><i class="icon icon-square"></i></a>');var a=$("#"+t+" > .wishlist_default");$("#"+t+" > .wishlist_default > a").remove(),a.append('<p class="is_wish_list_default"><i class="icon icon-check-square"></i></p>')}})}function WishlistVisibility(t,e){$("#hide"+e).is(":hidden")?($("."+t).slideDown("fast"),$("#show"+e).hide(),$("#hide"+e).css("display","block")):($("."+t).slideUp("fast"),$("#hide"+e).hide(),$("#show"+e).css("display","block"))}function WishlistSend(t,e,i){$.post(baseDir+"modules/blockwishlist/sendwishlist.php",{token:static_token,id_wishlist:e,email1:$("#"+i+"1").val(),email2:$("#"+i+"2").val(),email3:$("#"+i+"3").val(),email4:$("#"+i+"4").val(),email5:$("#"+i+"5").val(),email6:$("#"+i+"6").val(),email7:$("#"+i+"7").val(),email8:$("#"+i+"8").val(),email9:$("#"+i+"9").val(),email10:$("#"+i+"10").val()},(function(e){e?$.prototype.fancybox?$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+e+"</p>"}],{padding:0}):alert(e):WishlistVisibility(t,"hideSendWishlist")}))}function wishlistProductsIdsAdd(t){-1==$.inArray(parseInt(t),wishlistProductsIds)&&wishlistProductsIds.push(parseInt(t))}function wishlistProductsIdsRemove(t){wishlistProductsIds.splice($.inArray(parseInt(t),wishlistProductsIds),1)}function wishlistRefreshStatus(){$(".addToWishlist").each((function(){-1!=$.inArray(parseInt($(this).prop("rel")),wishlistProductsIds)?$(this).addClass("checked"):$(this).removeClass("checked")}))}function wishlistProductChange(t,e,i,s){if("undefined"==typeof mywishlist_url)return!1;var a=$("#quantity_"+t+"_"+e).val();$.ajax({type:"GET",url:mywishlist_url,headers:{"cache-control":"no-cache"},async:!0,cache:!1,dataType:"json",data:{id_product:t,id_product_attribute:e,quantity:a,priority:$("#priority_"+t+"_"+e).val(),id_old_wishlist:i,id_new_wishlist:s,myajax:1,action:"productchangewishlist"},success:function(n){1==n.success?($("#wlp_"+t+"_"+e).fadeOut("slow"),$("#wishlist_"+i+" td:nth-child(2)").text($("#wishlist_"+i+" td:nth-child(2)").text()-a),$("#wishlist_"+s+" td:nth-child(2)").text(+$("#wishlist_"+s+" td:nth-child(2)").text()+ +a)):$.prototype.fancybox&&$.fancybox.open([{type:"inline",autoScale:!0,minHeight:30,content:'<p class="fancybox-error">'+n.error+"</p>"}],{padding:0})}})}$(document).ready((function(){wishlistRefreshStatus(),$(document).on("change","select[name=wishlists]",(function(){WishlistChangeDefault("wishlist_block_list",$(this).val())})),$("#wishlist_button").popover({html:!0,content:function(){return $("#popover-content").html()}}),$(".wishlist").each((function(){current=$(this),$(this).children(".wishlist_button_list").popover({html:!0,content:function(){return current.children(".popover-content").html()}})}))}));